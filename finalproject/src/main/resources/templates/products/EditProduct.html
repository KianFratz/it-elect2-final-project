<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8" />
  <title>Edit Product - PastryHaven</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-pink-50 text-gray-700">

<!-- Header -->
<nav class="bg-white shadow-md py-4">
  <div class="container mx-auto px-6 flex items-center justify-between">
    <a href="/" class="text-pink-500 text-2xl font-bold">PastryHaven</a>
    <div class="space-x-6 hidden md:flex">
      <a href="/user/products" class="hover:text-pink-500 transition">Products</a>
      <a href="/cart" class="hover:text-pink-500 transition">Cart</a>
      <a href="/customer/aboutus" class="hover:text-pink-500 transition">About Us</a>
    </div>
  </div>
</nav>

<!-- Main Section -->
<section class="container mx-auto px-6 py-12">
  <div class="bg-white shadow-lg rounded-3xl p-8 max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold text-center text-pink-500 mb-8">Edit Product</h2>

    <form method="post" enctype="multipart/form-data" th:object="${productDto}">

      <!-- Product ID (read-only) -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">ID</label>
        <input type="text" readonly
               class="w-full bg-gray-100 border border-gray-300 rounded-lg p-3"
               th:field="${product.id}">
      </div>

      <!-- Name -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Name</label>
        <input type="text" class="w-full border border-pink-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-400"
               th:field="${productDto.name}">
        <p th:if="${#fields.hasErrors('name')}" th:errorclass="text-red-500 mt-1"
           th:errors="${productDto.name}"></p>
      </div>

      <!-- Description -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Description</label>
        <textarea class="w-full border border-pink-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-400"
                  th:field="${productDto.description}"></textarea>
        <p th:if="${#fields.hasErrors('description')}" th:errorclass="text-red-500 mt-1"
           th:errors="${productDto.description}"></p>
      </div>

      <!-- Stock -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Stock</label>
        <input type="number"
               class="w-full border border-pink-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-400"
               th:field="${productDto.stock}">
        <p th:if="${#fields.hasErrors('stock')}" th:errorclass="text-red-500 mt-1"
           th:errors="${productDto.stock}"></p>
      </div>

      <!-- Price -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Price</label>
        <input type="number" step="0.01" min="0"
               class="w-full border border-pink-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-400"
               th:field="${productDto.price}">
        <p th:if="${#fields.hasErrors('price')}" th:errorclass="text-red-500 mt-1"
           th:errors="${productDto.price}"></p>
      </div>

      <!-- Existing Image Preview -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Current Image</label>
        <img th:src="@{'/images/' + ${product.imageFileName}}"
             alt="Current product image"
             class="w-48 h-48 object-cover rounded-lg border border-gray-300 shadow-sm" />
      </div>

      <!-- Upload New Image -->
      <div class="mb-6">
        <label class="block text-lg mb-2 font-medium text-gray-700">Change Image</label>
        <input type="file"
               class="w-full border border-pink-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-pink-400"
               th:field="${productDto.imageFile}">
        <p th:if="${#fields.hasErrors('imageFile')}" th:errorclass="text-red-500 mt-1"
           th:errors="${productDto.imageFile}"></p>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-between mt-8">
        <button type="submit"
                class="bg-pink-500 text-white px-6 py-2 rounded-full hover:bg-pink-600 transition">
          Submit
        </button>
        <a href="/products"
           class="border border-pink-500 text-pink-500 px-6 py-2 rounded-full hover:bg-pink-50 transition">
          Cancel
        </a>
      </div>

    </form>
  </div>
</section>

<!-- Footer -->
<footer class="bg-pink-500 text-white py-8 mt-16">
  <div class="container mx-auto px-6 text-center">
    <p class="text-lg font-semibold">PastryHaven &mdash; Where sweetness meets style üç∞</p>
    <p class="mt-2">&copy; 2025 PastryHaven. All rights reserved.</p>
  </div>
</footer>

</body>
</html>
